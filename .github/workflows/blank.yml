name: Metrics
on:
  # Schedule daily updates
  schedule: [{cron: "0 0 * * *"}]
  # (optional) Run workflow manually
  workflow_dispatch:
  # (optional) Run workflow when pushing on master/main
  push: {branches: ["master", "main"]}
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:

    - name: Full-year calendar
      uses: lowlighter/metrics@latest
      with:
        filename: metrics.plugin.isocalendar.fullyear.svg
        token: ${{ secrets.METRICS_TOKEN }}
        base: ""
        plugin_isocalendar: yes
        plugin_isocalendar_duration: full-year
        
    - name: Anime
      uses: lowlighter/metrics@latest
      with:
        filename: metrics.plugin.anilist.svg
        token: ${{ secrets.METRICS_TOKEN }}
        base: ""
        plugin_anilist_user: HappyxSenpai
        plugin_anilist: yes
        plugin_anilist_sections: favorites, characters
        plugin_anilist_limit: 3
        plugin_anilist_limit_characters: 22
      
    - name: Steam
      uses: lowlighter/metrics@latest
      with:
        filename: metrics.plugin.steam.full.svg
        base: ""
        plugin_steam_token: ${{ secrets.STEAM_TOKEN }}
        plugin_steam: yes
        plugin_steam_user: "76561198132876294"
